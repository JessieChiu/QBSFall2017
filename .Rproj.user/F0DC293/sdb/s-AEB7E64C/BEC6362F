{
    "collab_server" : "",
    "contents" : "library(readr)\nlibrary(rstan)\nlibrary(rethinking)\n\n## Building Model 1\n\n### Import Data\n# read files\ndata1 = read.csv(file.path(\"datasets\", \"M1.data.new.csv\"))\n\n### Preprocess Data\n# factor to numeric\ndata1$crime_cases = as.numeric(as.character(data1$Total_cases_Number))\n# fix NAs\ndata1[1,\"crime_cases\"] = 115879\n\n# make log version of outcome\ndata1$log_crime = log(data1$crime_cases)\n\n# construct centered predictor \ndata1$Bx1_c<- data1$Bx1 - mean(data1$Bx1)\ndata1$Bx2_c<- data1$Bx2 - mean(data1$Bx2)\ndata1$Bx3_c<- data1$Bx3 - mean(data1$Bx3)\n\n# trim data frame\nd1 = data1[ , c(\"log_crime\",\"Bx1_c\",\"Bx2_c\",\"Bx3_c\")]\n\n# define model fit by map\nm1 <- map(\n  alist(\n    log_crime ~ dnorm(mu, sigma),\n    mu <- a +b1*Bx1_c + b2*Bx2_c + b3*Bx3_c,\n    a ~ dnorm(11,100),\n    b1 ~ dnorm(0,1),\n    b2 ~ dnorm(0,1),\n    b3 ~ dnorm(0,1),\n    sigma ~ dunif(0,10)\n  ),\n  data <- d1)\n\n# define model fit by map2stan\nm1.stan <- map2stan(\n  alist(\n    log_crime ~ dnorm(mu, sigma),\n    mu <- a +b1*Bx1_c + b2*Bx2_c + b3*Bx3_c,\n    a ~ dnorm(11,100),\n    b1 ~ dnorm(0,1),\n    b2 ~ dnorm(0,1),\n    b3 ~ dnorm(0,1),\n    sigma ~ dcauchy(0,2)\n  ),\n  data <- d1)\n\n## Building Model 2\n### Import Data\n# read files\ndata2 = read.csv(file.path(\"datasets\", \"M2.data.new.csv\"))\n\n### Preprocess Data\n# factor to numeric\ndata2$crime_cases = as.numeric(as.character(data2$Total_cases_Number))\n# fix NAs\ndata2[1,\"crime_cases\"] = 115879\n\n# make log version of outcome\ndata2$log_crime = log(data2$crime_cases)\n\n# trim data frame\nd2 = data2[ , c(\"log_crime\",\"log_box_office\",\"score.s\",\"Bscore.s\")]\n\n# define model fit by map\nm2 <- map(\n  alist(\n    log_crime ~ dnorm(mu, sigma),\n    mu <- a +b1*log_box_office + b2*score.s + b3*Bscore.s,\n    a ~ dnorm(11,100),\n    b1 ~ dnorm(0,1),\n    b2 ~ dnorm(0,1),\n    b3 ~ dnorm(0,1),\n    sigma ~ dunif(0,10)\n  ),\n  data <- d2)\n\nm2.stan <- map2stan(\n  alist(\n    log_crime ~ dnorm(mu, sigma),\n    mu <- a +b1*log_box_office + b2*score.s + b3*Bscore.s,\n    a ~ dnorm(11,100),\n    b1 ~ dnorm(0,1),\n    b2 ~ dnorm(0,1),\n    b3 ~ dnorm(0,1),\n    sigma ~ dcauchy(0,2)\n  ),\n  data <- d2)",
    "created" : 1513306668499.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3720041378",
    "id" : "BEC6362F",
    "lastKnownWriteTime" : 1513326957,
    "last_content_update" : 1513326957837,
    "path" : "C:/Users/jestw/Desktop/QBS/QBS Group 2_final/Website/datasets/model.R",
    "project_path" : "datasets/model.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}